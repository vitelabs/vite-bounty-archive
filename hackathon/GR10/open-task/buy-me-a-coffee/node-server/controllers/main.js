var express = require('express');
var router = express.Router();
var path = require('path');
const got = require('got');
const { WS_RPC } = require('@vite/vitejs-ws');
const { ViteAPI, wallet, utils, abi, accountBlock, keystore } =require('@vite/vitejs');

const seed = "your_seed";
const connection = new WS_RPC('wss://buidl.vite.net/gvite/ws');
const provider = new ViteAPI(connection, () => {
    console.log("client connected");
});

const myAccount = wallet.getWallet(seed).deriveAddress(0);
const recipientAccount = wallet.getWallet(seed).deriveAddress(0);

const CONTRACT = {
    binary: 'binary_code',    // binary code
    abi: [{ "constant":true, "inputs":[{"name":"_id","type":"uint256"}],
        "name":"getCup","outputs":[{"name":"configuration","type":"uint256"},
            {"name":"owner","type":"address"},
            {"name":"recipient","type":"address"},
            {"name":"amount","type":"uint32"}],"payable":false,"stateMutability":"view","type":"offchain"},
        {"constant":false,"inputs":[{"name":"recipient_","type":"address"},
                {"name":"amount_","type":"uint32"},
                {"name":"configuration_","type":"uint256"}],
            "name":"_createCup","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},
        {"anonymous":false,"inputs":[{"indexed":false,"name":"owner","type":"address"},
                {"indexed":false,"name":"cupConfiguration","type":"uint256"},
                {"indexed":false,"name":"newCupId","type":"uint256"},
                {"indexed":false,"name":"amount","type":"uint256"}],
            "name":"CupCreated","type":"event"}],
    offChain: 'binary_offchain_code',
    address: 'contract_address',
};

CONTRACT.address = 'contract_address'; //e.g vite_3055a2315c1096a9e506a278f14a87ff7a62c69b7c55a24d00 on testnet

async function receiveTransaction(account) {
    // get the first unreceived tx
    const data = await provider.request('ledger_getUnreceivedBlocksByAddress', account.address, 0, 1);
    if (!data || !data.length) {
        console.log('[LOG] No Unreceived Blocks');
        return;
    }
    // create a receive tx
    const ab = accountBlock.createAccountBlock('receive', {
        address: account.address,
        sendBlockHash: data[0].hash
    }).setProvider(provider).setPrivateKey(account.privateKey);

    await ab.autoSetPreviousAccountBlock();
    const result = await ab.sign().send();
    console.log('receive success', result);
}

async function sendTx(account, address ,amount) {
    const ab = accountBlock.createAccountBlock('send', {
        address: account.address,
        toAddress: address,
        amount
    }).setProvider(provider).setPrivateKey(account.privateKey);

    await ab.autoSetPreviousAccountBlock();
    const result = await ab.sign().send();
    console.log('send success', result);
}

async function callContract(account, methodName, abi, params, amount) {
    const block = accountBlock.createAccountBlock('callContract', {
        address: account.address,
        abi,
        methodName,
        amount,
        toAddress: CONTRACT.address,
        params
    }).setProvider(provider).setPrivateKey(account.privateKey);

    await block.autoSetPreviousAccountBlock();
    const result = await block.sign().send();
    console.log('call success', result);
};

router.get('/', async function(req, res, next) {
    res.render('public/index', { layout: "empty", page_title: 'Welcome', page_description:"" });
});

router.route('/enter-details').get(async function(req, res, next) {
    res.render('public/enter_details', { layout: "empty", page_title: 'Enter Details', page_description:"" });
}).post(async function(req, res, next) {
    await callContract(myAccount, 'getCup', CONTRACT.abi, [0], '0');
    await sendTx(myAccount, recipientAccount.address, '1');
    await receiveTransaction(recipientAccount);
    res.redirect('/coupon');
});

router.route('/quiz').get(async function(req, res, next) {
    res.render('public/donate', { layout: "empty", page_title: 'Choose your style', page_description:"" });
}).post(async function(req, res, next) {
    console.log(req.body);
    res.json(req.body)
});

router.route('/cup').get(async function(req, res, next) {
    num = Math.floor(Math.random() * (10)) + 1;
    await callContract(myAccount, '_createCup', CONTRACT.abi, [recipientAccount.address, 10, num], '0');
    await sendTx(myAccount, recipientAccount.address, '1');
    await receiveTransaction(recipientAccount);
    image = "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";
    res.render('public/coffee_cup', { layout: "empty", img: image, page_title: 'Your Cup', page_description:"" });
});

router.route('/hackathon-video').get(async function (req, res, next){
    res.redirect('https://youtu.be/AVTG_6WZLt0');
});

router.route('/coupon').get(async function(req, res, next) {
    num = Math.floor(Math.random() * (10)) + 1;
    await callContract(myAccount, '_createCup', CONTRACT.abi, [myAccount.address, 5, num], '0');
    await sendTx(myAccount, recipientAccount.address, '1');
    await receiveTransaction(recipientAccount);
    image = "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";
    res.render('public/coupon', { layout: "empty", temperature: "43", img: image, page_title: 'Coupon', page_description:"" });
}).post(async function(req, res, next) {
    console.log(req.body); res.json(req.body)
});

router.get('/error', function(req, res, next) {
    res.render('public/error', { layout: "empty", page_title: 'Error'});
});

router.get('/robots.txt', (req,res,next)=>{
    res.sendFile(path.resolve('public/robots.txt') );
});

module.exports = router;
