{
  "version": 3,
  "sources": ["../../../packages/common-node/src/bot/discord-types.ts", "../../../packages/common-node/src/bot/discord-bot.ts", "../../../packages/common-node/src/bot/discord-request.ts", "../../../packages/common-node/src/bot/discord-register-commands.ts", "../../../packages/common-node/src/index.ts", "../../../packages/server-netlify/src/index.ts", "../../../packages/server-netlify/src/handler.ts"],
  "sourcesContent": [null, null, null, null, null, "import type { Handler } from \"@netlify/functions\";\nimport { handleDiscordRoute } from \"./handler\";\n\nconst handler: Handler = async (event, context) => {\n\n    if(event.body && event.path.endsWith('/discord')){\n        return await handleDiscordRoute(event, context);\n    }\n\n    return {\n        statusCode: 200,\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n        },\n        body: JSON.stringify({ message: \"What's up?\" }),\n    };\n};\n\nexport { handler };", "import type { HandlerEvent, HandlerContext } from '@netlify/functions';\nimport { DiscordCommandConfig, DiscordRegisterCommandsConfig, DiscordRequestConfig, DiscordRequestError, handleDiscordCommand, handleDiscordRequest } from '@crypto-dev-amigos/common-node';\n\nconst config: DiscordRequestConfig & DiscordCommandConfig & DiscordRegisterCommandsConfig = {\n    baseDataUrl: 'https://openrarity.xyz/data/',\n    baseWebUrl: 'https://openrarity.xyz/',\n    applicationId: process.env.DISCORD_APPLICATION_ID as string,\n    discordPublicKey: process.env.DISCORD_PUBLIC_KEY as string,\n    botToken: process.env.DISCORD_BOT_TOKEN as string,\n};\n\nconst logError = (message: string, event:HandlerEvent, error: unknown) => {\n    console.error(`\\n\\n\\n # ERROR '${message}''`, {\n        path: event.path,\n        error,\n    });\n};\n\nexport const handleDiscordRoute = async (event:HandlerEvent, context:HandlerContext) => {\n\n    try{\n        const result = await handleDiscordRequest({\n            config, \n            body: JSON.parse(event.body ?? ''), \n            rawBody: event.body ?? '', \n            getHeader: (name) => event.headers[name]\n        });\n        return {\n            statusCode: 200,\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(result),\n        };\n    } catch(err) {\n        logError('handleDiscordRoute',event, err);\n\n        try{\n            const error = err as DiscordRequestError;\n            if(error.data){\n                if(error.data.textResponse){\n                    return {\n                        statusCode: error.data.statusCode,\n                        body: error.data.textResponse,\n                    };\n                }\n                if(error.data.jsonResponse){\n                    return {\n                        statusCode: error.data.statusCode,\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        body: JSON.stringify(error.data.jsonResponse),\n                    };\n                }\n\n                return {\n                    statusCode: error.data.statusCode,\n                    body: 'Error',\n                };\n            }\n        } catch {\n            // Ignore\n        }\n\n        logError('\u2757\u2757\u2757 handleDiscordRoute UNHANDLED',event, err);\n        return {\n            statusCode: 500,\n            body: 'Oops! Something broke!',\n        };\n    }\n};\n"],
  "mappings": "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",
  "names": []
}
